# 5월 25일 스터디

> 5월 25일 스터디 시작 전, 본인이 리팩터링 코드를 업로드 할 디렉토리 입니다.

- 5월 25일 **스터디 전**까지 `study_2023_0518` 디렉토리에 본인이 만든 코드를 업로드 해주세요.
  - Ex) `230518_kimjaejun/main.rb`
  - 코드를 작성하며 느낀점도 적으면서 나중에 다시 돌이켜보는 것도 좋을 수 있어요! (강제 아님)
- 5월 25일 **스터디 진행 후** 느낀점도 추가해주세요! (강제 아님)

<hr>

# 5월 25일 스터디 진행

- 일시 : 21:30 ~ 22:45 (약 1시간 진행)
- 범위 : 1.4장 (29p ~ 49p)
- 진행자 : 김도훈
- 진행
  - 토론 및 발표 - 70분
  - 다음 분량 및 리딩할 사람 정하기 - 5분

<br>

## 진행 내용

### 30 page

> 다음번에 코드를 볼 때, 다시 분석하지 않아도 코드 스스로가 자신이 하는 일이 무엇인지 이야기해줄 것이다.

- 가은님 : 코드와 개발자가 친근해져야하는 이유를 설명하는 것 같습니다. 그리고 그 수단이 '리팩터링'이라고 생각했기에 밑줄을 그었습니다.
- 도훈님 : 이 책에서 리팩터링이란 **‘읽기 좋게 만드는 것’** 을 뜻하는 것 같습니다. 그리고 읽기 좋게 만듦으로써 실수를 줄이게 한다고 생각이 되네요.

> ...(생략)... 절차를 따로 기록해두고, 나중에 참조하기 쉽도록 **'함수 추출하기'** 란 이름을 붙였다.

- 종욱님 : 책을 보기 전부터 사용했던 기법이고, 널리 사용되는만큼 중요하다고 생각되어 밑줄을 그었습니다.

### 32 page

> 아무리 간단한 수정이라도 리팩터링 후에는 항상 테스트하는 습관을 들이는 것이 바람직하다. ...(생략)... 수정할 때마다 테스트하면, 오류가 생기더라도 변경 폭이 작기 때문에 살펴볼 범위도 좁아서 문제를 찾고 해결하기가 훨씬 쉽다.

- 도훈님 : 수정을 할 때 마이너 하더라도 오류가 발생할 수 있다는 사실을 알게됐습니다. 따라서 저는 자잘한 부분이어도 테스트가 필수적으로 진행되어야 한다고 생각합니다. 이유는 안했을 경우 다시 처음으로 돌아와서 진행해야할 수 있기에, 효율성을 위해서라도 처음부터 확실하게 확인하며 진행하면 시간을 오히려 아낄 수 있기 때문입니다. (공감이 됐습니다.)
- 재준님 : 저도 중요하다고 생각합니다. 처음 개발공부할 때 수정하려고 했던 부분은 매우 사소한 것이었는데, 그 외의 코드가 마음에 안들어서 수정하고 넘어가려고 했을 때 어느순간 파일 3~4개를 동시에 수정하고 있는 저를 보게 됐습니다. 결국 실행도 안됐기에... 다시 롤백하고 리팩터링을 진행했던 경험이 있었습니다.
- 종욱님 : 저도 비슷한 생각이에요. 사실 리팩터링을 이번에 진행해보려고 했고, 일단 테스트 코드 추가 후 진행하려고 했습니다. 하지만 junit부터 추가하려고 했는데 기존에 만들어진 Main코드가 추가하기 어려운 구조로 되어있었기에... 리팩터링 시작전에 고려해야할 요소가 많아서 힘들었던 것 같습니다.
  - 도훈님 : 가끔 느끼는건데 비지니스 로직관련 개발보다 그에 대한 테스트 코드 작성에 더 많은 시간을 소비하는 것 같습니다ㅠ

> 이처럼 조금씩 변경하고 매번 테스트를 하는 것은 리팩터링 절차의 핵심이다.

- 가은님 : 맞는 말이라고 생각해서 빨간줄을 그었지만, 과연 이를 온전하게 이행하는 것은 어려울 것 같다고 생각했습니다.

### 33 page

> 일반적으로는 중첩 함수로 만들면 할 일 하나가 줄어드는 셈이다.

- 재준님 : 가은님, 진짜 JS에서는 중첩함수를 쓰나요?
  - 가은님 : 넵넵 필요할 때 씁니다.

### 34 page

> 나는 함수의 반환 값에는 항상 result 라는 이름을 쓴다. 그러면 그 변수의 역할을 쉽게 알 수 있다.

- 도훈님 : 변수명을 지을 때 고민을 많이 하는데 그 역할까지는 고려한적이 없었습니다. 그래서 해당 글을 보고 이렇게도 할 수 있겠구나를 생각할 수 있는 계기가 된 것 같습니다.
  - Ex) `total_amount`는 '총합'이라는 뜻인것을 알지만, 이게 **'반환될 변수의 역할'**을 가졌다고는 생각해본적이 없었다.
  - 재준님 : 저도 '의미'에만 신경썼지 '역할'에 대해서는 지금 처음 생각해보게 됐네요. 색다르게 볼 수 있어서 좋았습니다!
- 가은님 : React 로 프론트 개발을 하다보면 버튼 같은 것을 만들 때 변수명으로 `XXHandler` 등으로 만듭니다. 따라서 이 때의 역할이란 '버튼'이고, 해당 문장은 그런 역할을 나타낸다고 생각할 수도 있지 않을까 싶었어요.

> 지금처럼 매개변수의 역할이 뚜렷하지 않을 때는 부정관사(a/an)를 붙인다.

- 재준님 : 이게 맞나요..? 저는 단수/복수로도 충분하게 표현이 된다고 생각을 합니다.
- 종욱님 : 이렇게 a/an을 붙이면 괜히 다른 의미가 있는지 생각하게 만들어서 또 다른 오해를 불러일으킬 것 같아 보입니다.

### 35 page

> 컴퓨터가 이해하는 코드는 바보도 작성할 수 있다. 사람이 이해하도록 작성하는 프로그래머가 진정한 실력자다.

- 도훈님 : 뒷문장에 대해서는 알고 있었는데, 앞 문장에 대해서 새롭게 생각해볼 수 있게 돼서 좋았습니다. 개발자는 코드만 작성할 줄 알면 안된다고 생각합니다.

> 좋은 코드라면 하는 일이 명확히 드러나야 하며, 이 때 변수 이름은 커다란 역할을 한다.

- 가은님 : 아까 앞에서 a/an 써서 이해못할 변수명을 썼는데 이런 문장이 있다는게 모순적이라고 생각이 됐습니다..
- 종욱님 : 변수명은 당연하게도 거의 다 영어로 적습니다. 근데 또 같은 단어여도 도메인마다 그 의미가 다르게 와닿을 수 있거든요. 그래서 해당 문장은 그런 것들을 설명하려 했던 것 같습니다.

### 36 page

> **변수 인라인하기**를 적용한다.

- 재준님 : 굳이 이렇게까지 로컬 변수를 없앨려고 해야할까?
- 종욱님 : 인라인을 하면서 오히려 코드 가독성이 떨어지는 것 같습니다. 다른 사람이 보기엔. 왜 갑자기 함수를 받는거지? 매개변수 측면에서 추상화레벨이 맞는가? 이렇게까지 지역변수를 기피할 이유가 있을까? 라는 생각이 들게하여 불필요한 혼란을 줄 수 있을 것도 같네요.

### 39 page

> 설사 심각하게 느려지더라도 제대로 리팩터링된 코드베이스는 그렇지 않은 코드보다 성능을 개선하기가 훨씬 수월하다.

- 가은님 : 의문이 생겼던게, 중첩 함수를 계속 쓰다보면 함수 내부에서만 지속적으로 호출되게 되고, 이는 성능에 악영향을 미치게 돼서 느려집니다. 근데 지금 리팩터링으로 중첩 함수를 쓰고 있는데 이런 리팩터링이 마냥 좋기만 할지는 잘 모르겠습니다. <br>
  → 도훈님 : 기술부채라고 할 수 있는데, 이 부분은 유도리 있게 가져가는게 맞는 것 같다. 정해진 리소스 안에서 더 효율적인 일을 해야하기에.
- 재준님 : 실제 N + 1관련해서 문제가 발생했는데, 과제 성격과 한정된 리소스에서 더 효율적인 업무를 위해서 어느정도 타협을 했던 경험이 있었습니다.
- 종욱님 : 각각의 함수에 대해서 추출하는 작업을 책에서는 진행하고 있는데, 이는 각 함수마다의 성능이 측정가능해짐으로써 성능파악이 더욱 용이해져서 수월하다는게 아닐까 싶었어요.

### 41 page

> 필요 없어진 주석 두 문장은 지웠다.(남겨 두면 오히려 오해의 소지가 있다.)

- 종욱님 : 이게 다른 사람들이 볼 때에는 주요한 내용일 수 있다고 생각할 수 있기에 실수로라도 남기면 혼란에 빠지게 만들 수 있습니다. 실제로 비슷한 경험을 했었기에 해당 부분을 조심해야한다고 생각했습니다.

### 47 page

> '대체로 그렇다'와 '항상 그렇다'는 엄연히 다르다. 때로는 리팩터링이 성능에 상당한 영향을 주기도 한다.

- 가은님 : 이런 경우가 생겼을 때 제가 리팩터링을 먼저 할 수 있을까 라는 생각이 들었습니다. 저라면 성능부터 챙겼을 것 같거든요. 

> 리팩터링된 코드를 예전으로 되돌리는 경우도 있지만, 대체로 리팩터링 때문에 성능 개선을 더 효과적으로 수행할 수 있다.

- 종욱님 : 리팩터링으로 성능을 올렸다면, 이전에는 어떤 리팩터링으로 인하여 성능문제가 일어났다는 것 아닌가..?싶어서 의문이 들었습니다. 문제를 위한 문제를 만들었다는 느낌을 받았네요...

<hr>



## 다음 스터디


- 6월 1일 목요일 21:30
- 진행자 : 가은님
- 분량 : 1.5장 ~ 1.7장
- 준비해야할 사항 : 각자 **1.5장 ~ 1.7장을 모두 읽어오기**

## 이번 스터디 피드백

코드를 읽어보는게 좋아보이고 실제로 도움이 되는 것 같습니다. 근데 스터디 시간에만 책을 읽으면 코드를 읽을 시간이 부족해서 아쉬운 부분이 있습니다. 따라서 미리 읽어오는 것도 좋은 것 같습니다.
